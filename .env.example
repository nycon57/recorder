# Clerk Authentication
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=your_clerk_publishable_key
CLERK_SECRET_KEY=your_clerk_secret_key
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/dashboard
NEXT_PUBLIC_CLERK_ORGANIZATIONS_ENABLED=true

# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
SUPABASE_DB_URL=your_supabase_database_url

# Cloudflare R2 (Multi-tier storage for cost optimization)
# Get these from: https://dash.cloudflare.com → R2 → Manage API Tokens
R2_ACCOUNT_ID=your_cloudflare_account_id
R2_ACCESS_KEY_ID=your_r2_access_key_id
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
R2_BUCKET_NAME=recorder-storage
R2_REGION=auto

# OpenAI (keep for transcription in hybrid mode)
OPENAI_API_KEY=your_openai_api_key
OPENAI_ORG_ID=your_openai_org_id

# Google AI (for Gemini and Embeddings)
GOOGLE_AI_API_KEY=your_google_ai_api_key

# Google Generative AI (for AI Assistant with Gemini 2.5 Flash)
# Used by Vercel AI SDK Google provider
GOOGLE_GENERATIVE_AI_API_KEY=your_google_generative_ai_api_key

# Google Cloud (for Speech-to-Text)
# Path to your service account JSON key file (use ABSOLUTE path!)
GOOGLE_APPLICATION_CREDENTIALS=/path/to/your/google-cloud-key.json

# Cohere (for LLM re-ranking - optional but recommended)
# Get your API key from: https://dashboard.cohere.com/api-keys
# This enables neural re-ranking of search results for improved relevance
COHERE_API_KEY=your_cohere_api_key

# Transcription Service (choose one)
# Option 1: OpenAI Whisper
WHISPER_API_KEY=your_whisper_api_key

# Option 2: AssemblyAI
ASSEMBLYAI_API_KEY=your_assemblyai_api_key
ASSEMBLYAI_WEBHOOK_SECRET=your_assemblyai_webhook_secret

# Stripe
STRIPE_SECRET_KEY=your_stripe_secret_key
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret

# Upstash Redis (for rate limiting)
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_upstash_redis_token

# Resend (email notifications)
RESEND_API_KEY=your_resend_api_key
RESEND_FROM_EMAIL=notifications@yourdomain.com

# Application
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000
WEBHOOK_SECRET=your_webhook_secret
LOG_LEVEL=debug

# Feature Flags
FEATURE_PUBLIC_SHARE=true
FEATURE_PII_REDACTION=false
FEATURE_PINECONE=false
FEATURE_RLS=false

# RAG & AI Assistant Configuration
# Enable agentic multi-step reasoning for complex queries (default: true)
ENABLE_AGENTIC_RAG=true
# Enable Cohere re-ranking for improved search relevance (default: true, requires COHERE_API_KEY)
ENABLE_RERANKING=true
# Enable chat tools for enhanced discovery and exploration (default: true)
ENABLE_CHAT_TOOLS=true
# Maximum iterations for agentic search (default: 3)
AGENTIC_MAX_ITERATIONS=3
# Enable self-reflection in agentic search (default: true)
ENABLE_SELF_REFLECTION=true
# Confidence threshold for agentic search (0-1, default: 0.75)
AGENTIC_CONFIDENCE_THRESHOLD=0.75
# Maximum sub-queries for query decomposition (default: 5)
MAX_SUBQUERIES=5

# Search Quality Monitoring (optional)
# Enable search performance tracking to monitor and analyze search quality
ENABLE_SEARCH_MONITORING=true
# Enable A/B testing for search experiments (use with caution in production)
ENABLE_SEARCH_AB_TESTING=false

# Search Configuration (optional overrides)
# Default similarity threshold (0.4-0.7, default: 0.5)
# Lower values = more results but potentially less relevant
# Higher values = fewer results but more relevant
SEARCH_DEFAULT_THRESHOLD=0.5
# Enable hybrid search (vector + keyword) by default
SEARCH_ENABLE_HYBRID=true
# Enable query expansion for short queries (1-2 words)
SEARCH_ENABLE_QUERY_EXPANSION=true

# Search Metrics Storage Configuration
# Storage backend for search metrics: 'redis' | 'memory' (default: 'memory')
# - memory: In-process storage, lost on restart, not shared across instances
# - redis: Shared storage, persistent across restarts, shared across instances (recommended for production)
SEARCH_METRICS_STORAGE=memory
# Max metrics to buffer before flushing (default: 100, recommended: 500+ for redis)
SEARCH_METRICS_BUFFER_SIZE=100
# Metrics TTL in seconds (default: 86400 = 24 hours, only applies to redis storage)
SEARCH_METRICS_TTL=86400

# Monitoring Alert Thresholds
# Alert if search takes longer than this in milliseconds (default: 3000)
SEARCH_ALERT_THRESHOLD_SLOW=3000
# Alert if average similarity is below this value (default: 0.5)
SEARCH_ALERT_THRESHOLD_LOW_SIM=0.5

# A/B Testing Variants (advanced)
# Comma-separated list of enabled variants for search experiments
# Options: control, adaptive_threshold, hybrid_first, aggressive_recall
# Default: all variants enabled
ENABLED_SEARCH_VARIANTS=control,adaptive_threshold,hybrid_first,aggressive_recall

# Monitoring (Optional - for production)
# SENTRY_DSN=your_sentry_dsn
# DATADOG_API_KEY=your_datadog_api_key

# Semantic Chunking Settings
SEMANTIC_CHUNK_MIN_SIZE=200            # Minimum chunk size in characters
SEMANTIC_CHUNK_MAX_SIZE=800            # Maximum chunk size in characters
SEMANTIC_CHUNK_TARGET_SIZE=500         # Target chunk size in characters
SEMANTIC_SIMILARITY_THRESHOLD=0.85     # Similarity threshold for semantic boundaries (0-1)

# Sentence Transformer Model
# Options: Xenova/all-MiniLM-L6-v2 (default, 80MB), Xenova/all-MiniLM-L12-v2 (120MB, better quality)
SENTENCE_TRANSFORMER_MODEL=Xenova/all-MiniLM-L6-v2

# Model Cache Settings
MODEL_CACHE_DIR=./.cache/models        # Directory for caching downloaded models
MODEL_CLEANUP_DELAY=300000             # Model cleanup delay in ms (5 minutes default)

# FFmpeg Configuration (Optional - auto-detected if not specified)
# Uncomment and specify paths if FFmpeg is not in your system PATH
# FFMPEG_PATH=/usr/local/bin/ffmpeg
# FFPROBE_PATH=/usr/local/bin/ffprobe